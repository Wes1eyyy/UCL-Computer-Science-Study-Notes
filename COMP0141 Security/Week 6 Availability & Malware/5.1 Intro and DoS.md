# Week 5 – Availability & Malware

## Core Concepts

- **Availability** (可用性):  
    The ability to use the system as expected.
    
- **Threats to availability** (可用性威胁):
    
    - Hardware failures (硬件故障)
        
    - Malware (恶意软件)
        
    - Denial of Service (DoS, 拒绝服务攻击)
        

---

## Denial of Service (DoS)

- **DoS goal**:  
    Take down a large system using minimal computing power.
    
- **Amplification attacks** (放大攻击):
    
    - Use a small input to create a large damaging effect.
        
    - Two types:
        
        - DoS bug (设计漏洞) → One machine disrupts service.
            
        - DoS flood (洪水攻击) → Botnet floods server with requests.
            

---

## Notable Example

- **Estonia 2007**:
    
    - Massive DoS attack on government + commercial sites.
        
    - Attack types: ICMP floods, TCP SYN floods.
        
    - Defense: Block all foreign traffic temporarily.
        

---

## IP & TCP Review

- **IP (Internet Protocol)** (互联网协议):
    
    - Connectionless (无连接), unreliable (不可靠), best effort (尽力而为).
        
- **TCP (Transmission Control Protocol)** (传输控制协议):
    
    - Session-based (基于会话), reliable, in-order delivery (有序传输).
        
- **TCP Handshake** (三次握手):
    
    1. SYN → 
	    1. Synchronize（同步）
        
    2. SYN/ACK → 
	    1. Acknowledgment（确认）
        
    3. ACK → connection established.
        

---

## TCP SYN Flood Attack (SYN洪水攻击)

- **Low-rate SYN flood** (低速洪水攻击):
    
    - Send many SYN packets with random IPs.
        
    - Fill server backlog queue, block real clients.
        
- **Classic Example**:
    
    - MS Blaster worm (2003): SYN flood on port 80.
        

---

## Defense Techniques

- **Wrong approach**:
    
    - Increase backlog size or decrease timeout.
        
- **Correct approach**:
    
    - Use **SYN cookies** (SYN cookie技术):
        
        - Server encodes connection info into sequence number.
            
        - Only allocate resources after valid ACK.
            

---

## Massive Flood (大规模洪水)

- **Botnet DDoS** (分布式拒绝服务):
    
    - Example: BetCris.com (2003), 20,000 bots, 2 Gb/sec SYNs.
        
    - Overwhelms network or routers, not just servers.
        
- **Defense**:
    
    - Proxy (代理) only forwards fully established TCP connections (e.g., Prolexic, Verisign).
        

---

## Stronger Attack: TCP Connection Flood (TCP连接洪水)

- Complete TCP connections + send small HTTP requests repeatedly.
    
- Harder to block since traffic looks legitimate.
    
- But attacker must reveal real bot IPs → can be blocked or rate-limited.
    

---