## ğŸ›¡ï¸ Buffer Overflow â€“ Key Notes

### ğŸ“¦ Function Calls

- Function calls use a **stack** (æ ˆ) to track:
    
    - local variables (å±€éƒ¨å˜é‡)
        
    - saved frame pointer (`fp`) (ä¿å­˜å¸§æŒ‡é’ˆ)
        
    - return address (`ret addr`) (è¿”å›åœ°å€)
        

### ğŸ’¥ Buffer Overflow Attack

- Overflow happens when:
    
    - You write past the bounds of a local buffer (æ•°ç»„è¶Šç•Œ).
        
- Danger:
    
    - Overwrite another local variable â†’ change logic.
        
    - Overwrite `saved fp` â†’ break stack layout.
        
    - Overwrite `return address` â†’ redirect execution (è·³è½¬åˆ°æ”»å‡»è€…ä»£ç ).
        

### ğŸ¹ Return-Oriented Programming (ROP)

- Attack technique where overwritten `ret addr` points to attacker-controlled code snippets.
    

### ğŸ”¨ Smashing the Stack

- Worst case: attacker injects malicious values and gains full control of the program.
    

### ğŸ›‘ Mitigations

- Think like an attacker:
    
    - Are bounds checked? (æ£€æŸ¥è¾¹ç•Œ)
        
    - Is the check applied everywhere? (å®Œå…¨ä¸­ä»‹)
        
    - Is the check itself secure?
        
- Use safer APIs (e.g., `strlcpy` instead of `strcpy`).
    
- Apply protections:
    
    - Stack canaries (æ ˆé‡‘ä¸é›€)
        
    - ASLR (Address Space Layout Randomization åœ°å€ç©ºé—´éšæœºåŒ–)
        
    - Non-executable stack (ä¸å¯æ‰§è¡Œæ ˆ)
        

---